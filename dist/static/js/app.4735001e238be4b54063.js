webpackJsonp([1],[,,,,function(t,e,n){"use strict";var i=n(18),a=n.n(i),s=n(5),r=n.n(s),o=n(17),u=n.n(o);e.a={_object:{id:""},state:{showOptionUid:0},types:["any","auto","literal","array","object","bool","number","function","string"],updateShowOptionUid:function(t){this.state.showOptionUid=t},copy:function(t){return JSON.parse(r()(t))},parse:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var i={};if(n=n?n+"."+e:e,u.a.isArray(t)){i={name:e,id:n,type:"array"},i.value=[];for(var a=0;a<t.length;a++)i.value.push(this.parse(t[a],a,n))}else if(u.a.isObject(t)){i={name:e,id:n,type:"object"},i.value=[];for(var s in t)i.value.push(this.parse(t[s],s,n))}else i={name:e,id:n,type:"auto",value:t};return i}catch(t){return!1}},formate:function(t){return r()(t,null,4)},stringify:function(t){var e={};try{var n=t.type||"string";if("array"===n){e=[];var i=!0,s=!1,r=void 0;try{for(var o,u=a()(t.value);!(i=(o=u.next()).done);i=!0){var d=o.value;e.push(this.stringify(d))}}catch(t){s=!0,r=t}finally{try{!i&&u.return&&u.return()}finally{if(s)throw r}}}else if("object"===n){e={};var c=!0,l=!1,p=void 0;try{for(var h,v=a()(t.value);!(c=(h=v.next()).done);c=!0){var m=h.value;e[m.name]=this.stringify(m)}}catch(t){l=!0,p=t}finally{try{!c&&v.return&&v.return()}finally{if(l)throw p}}}else if("string"===n)e=t.value;else try{e=JSON.parse(t.value)}catch(n){e=t.value}}catch(t){}return e}}},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){function i(t){n(68)}var a=n(3)(n(33),n(77),i,null,null);t.exports=a.exports},,function(t,e,n){"use strict";e.a={test:[{name:"root",id:"root",showOption:!1,options:["addDic","addArray","addMany","addKv"],d:1},{name:"addKv",type:"string",id:"addKv",value:"ssss"},{name:"addDic",type:"object",id:"addDic",options:["addDic","addArray","addMany","addKv"]},{name:"addArray",id:"addArray",type:"array"},{name:"addMany",id:"addMany",type:"array",showOption:!0,options:["addDic","addArray","addMany"],value:[{name:"ss",value:"abc"},{name:"ss2",value:"abc2"}]}]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),a=n(29),s=n.n(a);i.a.config.productionTip=!1,new i.a({el:"#app",template:"<App/>",components:{App:s.a}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),a=n.n(i),s=n(76),r=n.n(s),o=n(31),u={str:"str",number:1,arr1:[1,1,3],obj:{str2:"str2"}};u=[1],e.default={name:"app",data:function(){return{data:u,schemas:o.a.test}},components:{Json:r.a},computed:{d:{get:function(){return a()(this.data,null,4)},set:function(t){try{this.data=JSON.parse(t)}catch(t){}}}},methods:{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(18),a=n.n(i),s=n(5),r=n.n(s),o=n(17),u=n.n(o),d=n(75),c=n.n(d),l=n(74),p=n.n(l),h=n(4);u.a.isIteration=function(t){return u.a.isArray(t)||u.a.isObject(t)},e.default={name:"v-item",props:["tree","schemas","index","parentId"],components:{ItemOption:c.a,ItemInput:p.a},data:function(){return{isSetHidden:!1,isJsonItem:!0,uid:u.a.uniqueId(),state:h.a.state}},created:function(){this.isSetHidden=this.isHidden||!1,this.schema.showOption&&this.showOption(),this.updateType()},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){this.updateType()},watch:{},computed:{isShowOption:function(){return this.uid===this.state.showOptionUid},computedName:function(){return"array"!==this.$parent.tree.type||this.isRoot()?this.tree.name?this.tree.name:(this.tree.name=this.key,"key"):(this.tree.name=this.index,this.index)},computedValue:function(){if("object"===this.tree.type)return"";if("array"===this.tree.type){return"Array["+(u.a.isArray(this.tree.value)?this.tree.value.length:"")+"]"}return"string"===this.tree.type?r()(this.tree.value):"function"===this.tree.type?this.tree.value():this.tree.value},nameEditable:function(){return"array"!==this.tree.type&&!(!1===this.tree.nameEditable)},valueEditable:function(){return!(!1===this.tree.valueEditable)},valueTypeClass:function(){var t=this.tree.type;return"string"===t?"vj-value-string":t in["object","array"]?"vj-value-object":"vj-value-literal"},computedOptions:function(){var t=this,e=[];return this.schema&&u.a.map(this.schema.options,function(n){var i=u.a.find(t.schemas,{id:n});i&&e.push(i)}),e},computedId:function(){if(this.isRoot())return["root"];var t=h.a.copy(this.parentId);return t.push(this.computedName),t},schema:function(){return u.a.find(this.schemas,{id:u.a.last(this.computedId)})||{}},isIteration:function(){return"object"===this.tree.type||"array"===this.tree.type},isNameUnique:function(){if("object"===this.$parent.tree.type&&u.a.isObject(this.$parent.tree.value)&&!this.isRoot()){var t=!0,e=!1,n=void 0;try{for(var i,s=a()(this.$parent.tree.value);!(t=(i=s.next()).done);t=!0){var r=i.value;if(r.isUniqueName&&r.name===this.tree.name&&r!==this.tree)return!1}}catch(t){e=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw n}}}return this.$set(this.tree,"isUniqueName",!0),3}},methods:{toggleOption:function(){this.computedOptions.length>0?this.state.showOptionUid===this.uid?h.a.updateShowOptionUid(0):h.a.updateShowOptionUid(this.uid):this.addItem()},hideOption:function(){h.a.updateShowOptionUid(0)},addItem:function(t){var e=void 0;t||(t="$$string"),e="$$string"===t?{name:"key",type:"string",value:"value"}:"$$literal"===t?{name:"key",type:"number",value:"value"}:h.a.copy(u.a.find(this.schemas,{id:t})),u.a.isObject(this.tree.value)||this.$set(this.tree,"value",[]),"object"!==this.tree.type&&"array"!==this.tree.type&&this.updateType("object"),this.tree.value.push(e)},reduceItem:function(){this.$parent.tree.value.splice(this.index,1)},showReduce:function(){return!this.isReduce},toggleHide:function(){this.isSetHidden=!this.isSetHidden},setHidden:function(t){this.isSetHidden=t},isRoot:function(){return"v-item"!==this.$parent.$options._componentTag},updateType:function(t){if("auto"!==(t=t||"auto")&&-1!==u.a.indexOf(h.a.types,t))return void(this.tree.type=t);var e=this.tree.value||"";this.tree.type||this.$set(this.tree,"type","auto");var n=this.tree.type||"auto";return"auto"===n||-1===u.a.indexOf(h.a.types,n)?void(u.a.isFunction(e)?this.tree.type="function":u.a.isObject(e)?this.tree.type="object":u.a.isNumber(e)?this.tree.type="number":u.a.isBoolean(e)?this.tree.type="bool":u.a.isString(e)?this.tree.type="string":this.tree.type="literal"):void 0}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);e.default={name:"ItemInput",props:{value:{},tree:{},display:{default:function(){return this.value}},isName:{default:!1},editable:{default:!0}},data:function(){return{state:i.a.state,isFocus:!1}},computed:{computedValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},valueTypeClass:function(){return this.isName?"vj-input-name":"array"===this.tree.type?"vj-input-normal":"string"===this.tree.type?"vj-input-string":"vj-input-literal"}},methods:{focus:function(){var t=this;this.editable&&(this.isFocus=!0,setTimeout(function(){return t.$el.children[1].focus()},0))},blur:function(){this.isFocus=!1}},watch:{"state.showOption":function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);e.default={name:"ItemOption",props:["options"],data:function(){return{state:i.a.state}},methods:{addItem:function(t){t=t||"",this.$emit("addItem",t)}},watch:{"state.showOption":function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),a=n.n(i),s=n(73),r=n.n(s),o=n(4),u=n(17),d=n.n(u);e.default={name:"json",props:{value:{default:{}},schemas:{default:{}},name:{default:"root"}},data:function(){return{historyJsons:[],undoIndex:1,isUndo:!1,tree:{}}},components:{"v-item":r.a},created:function(){var t=o.a.parse(this.value,this.name)||!1;!1!==t&&(this.tree=t)},watch:{value:function(t){var e=o.a.parse(t,this.name);this.tree=e}},computed:{mid:function(){var t=void 0;try{t=o.a.stringify(this.tree)}catch(e){t=this.value}return d.a.isEqual(t,this.value)?this.value:(this.$emit("input",t),t)}},methods:{save:function(){this.isUndo?(this.isUndo=!1,this.undoIndex+=1):(this.historyJsons.push(JSON.parse(a()(this.tree))),this.undoIndex=1),this.historyJsons.length>100&&this.hitoryJsons.shift()},undo:function(){var t=this.historyJsons.length;if(!(t-this.undoIndex<=0)){var e=this.historyJsons[t-this.undoIndex-1];this.tree=JSON.parse(a()(e)),this.undoIndex+=1,this.isUndo=!0}},redo:function(){var t=this.historyJsons.length;if(!(this.undoIndex<=1)){this.undoIndex-=1;var e=this.historyJsons[t-this.undoIndex];this.tree=JSON.parse(a()(e)),this.isUndo=!0}}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){function i(t){n(71)}var a=n(3)(n(34),n(80),i,null,null);t.exports=a.exports},function(t,e,n){function i(t){n(70)}var a=n(3)(n(35),n(79),i,null,null);t.exports=a.exports},function(t,e,n){function i(t){n(72)}var a=n(3)(n(36),n(81),i,null,null);t.exports=a.exports},function(t,e,n){function i(t){n(69)}var a=n(3)(n(37),n(78),i,null,null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Json",{attrs:{schemas:t.schemas,name:"root"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),t._v(" "),n("hr"),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.d,expression:"d"}],domProps:{value:t.d},on:{input:function(e){e.target.composing||(t.d=e.target.value)}}}),t._v("\n  "+t._s(t.data)+"\n")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("span",{on:{click:t.undo}},[t._v("undo")]),t._v(" "),n("span",{on:{click:t.redo}},[t._v("redo")])]),t._v(" "),n("v-item",{attrs:{tree:t.tree,schemas:t.schemas,index:0}}),t._v(" "),n("div",{staticStyle:{display:"none"}},[t._v(t._s(t.mid))])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vj-input-block"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isFocus,expression:"!isFocus"}],staticClass:"vj-input-display",class:t.valueTypeClass,domProps:{textContent:t._s(t.display)},on:{click:function(e){e.stopPropagation(),t.focus(e)}}}),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:t.isFocus,expression:"isFocus"},{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",staticClass:"vj-input",attrs:{type:"text"},domProps:{value:t.computedValue},on:{blur:t.blur,input:function(e){e.target.composing||(t.computedValue=e.target.value)}}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isIteration?n("div",{staticClass:"vj-object"},[n("span",{on:{click:function(e){t.toggleHide()}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isSetHidden,expression:"isSetHidden"}],staticClass:"vj-hide-btn"},[t._v("\n        ►\n      ")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSetHidden,expression:"!isSetHidden"}],staticClass:"vj-show-btn"},[t._v("\n       ▼\n      ")])]),t._v(" "),n("item-input",{attrs:{display:t.computedName,tree:t.tree,isName:!0,editable:t.nameEditable},model:{value:t.tree.name,callback:function(e){t.tree.name=e},expression:"tree.name"}}),t._v(":\n      "),n("item-input",{attrs:{display:t.computedValue,tree:t.tree,isName:!0,editable:t.valueEditable},model:{value:t.tree.name,callback:function(e){t.tree.name=e},expression:"tree.name"}}),t._v(" "),n("span",{staticClass:"vj-add-btn",on:{click:function(e){t.toggleOption()}}},[t._v("\n        +\n        "),t.isShowOption?n("item-option",{attrs:{options:t.computedOptions},on:{addItem:t.addItem}}):t._e()],1),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.showReduce(),expression:"showReduce()"}],staticClass:"vj-reduce-btn",on:{click:function(e){t.reduceItem()}}},[t._v("\n      -\n    ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSetHidden,expression:"!isSetHidden"}],staticClass:"vj-item-block"},t._l(t.tree.value,function(e,i){return n("div",{staticClass:"vj-item"},[n("v-item",{attrs:{tree:e,schemas:t.schemas,index:i,parentId:t.computedId}})],1)}))],1):n("div",{staticClass:"vj-item"},[n("item-input",{attrs:{display:t.computedName,tree:t.tree,isName:!0,editable:t.nameEditable},model:{value:t.tree.name,callback:function(e){t.tree.name=e},expression:"tree.name"}}),t._v(":\n    "),n("item-input",{attrs:{display:t.computedValue,tree:t.tree,isName:!1,editable:t.valueEditable},model:{value:t.tree.value,callback:function(e){t.tree.value=e},expression:"tree.value"}}),t._v(" "),n("span",{staticClass:"vj-add-btn",on:{click:function(e){t.addItem()}}},[t._v(" + ")]),t._v(" "),t.showReduce()?n("span",{staticClass:"vj-reduce-btn",on:{click:function(e){t.reduceItem()}}},[t._v("\n      - ")]):t._e()],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vj-option-block"},t._l(t.options,function(e){return n("div",{staticClass:"vj-option-name",on:{click:function(n){t.addItem(e.id)}}},[n("span",[t._v(t._s(e.name))])])}))},staticRenderFns:[]}}],[32]);
//# sourceMappingURL=app.4735001e238be4b54063.js.map